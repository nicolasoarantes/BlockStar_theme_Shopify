{{ 'section-collection-list.css' | asset_url | stylesheet_tag }}
{{ 'component-card.css' | asset_url | stylesheet_tag }}

{%- style -%}
.collection-list-wrapper {
  display: flex;
  flex-wrap: wrap;
  width: 100%;
}

.collection-card {
  width: 50%;
  position: relative;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: flex-end;
}

.collection-card__image {
  width: 100%;
  height: auto;
  transition: transform 0.3s ease;
}

.collection-card:hover .collection-card__image {
  transform: scale(1.1);
}

.collection-card__overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  padding: 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.collection-card:hover .collection-card__overlay {
  opacity: 1;
}

.collection-card__title {
  color: white;
  font-size: {{ section.settings.title_font_size | default: '1.5rem' }};
}

.collection-card__button {
  background-color: white;
  color: black;
  padding: 8px 16px;
  text-transform: uppercase;
  font-weight: bold;
  font-size: {{ section.settings.button_font_size | default: '1rem' }};
  text-decoration: none;
}
{%- endstyle -%}

<div class="collection-list-wrapper">
  {%- for block in section.blocks -%}
    <div class="collection-card">
      {%- if block.settings.collection != blank -%}
        {%- assign collection = block.settings.collection -%}
        {%- assign image = collection.featured_image -%}
        <img 
          src="{{ image | image_url: 'master' }}" 
          alt="{{ collection.title }}" 
          width="{{ image.width }}" 
          height="{{ image.height }}" 
          class="collection-card__image" 
        />
        <div class="collection-card__overlay">
          <h3 class="collection-card__title">{{ collection.title }}</h3>
          <a href="{{ collection.url }}" class="collection-card__button">Shop Now</a>
        </div>
      {%- endif -%}
    </div>
  {%- endfor -%}
</div>

{% schema %}
{
  "name": "Collection List",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Our Collections"
    },
    {
      "type": "select",
      "id": "title_font_size",
      "label": "Title Font Size",
      "default": "1.5rem",
      "options": [
        { "value": "1rem", "label": "Small" },
        { "value": "1.5rem", "label": "Medium" },
        { "value": "2rem", "label": "Large" }
      ]
    },
    {
      "type": "select",
      "id": "button_font_size",
      "label": "Button Font Size",
      "default": "1rem",
      "options": [
        { "value": "0.8rem", "label": "Small" },
        { "value": "1rem", "label": "Medium" },
        { "value": "1.2rem", "label": "Large" }
      ]
    }
  ],
  "blocks": [
    {
      "type": "featured_collection",
      "name": "Featured Collection",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Select Collection"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Collection List with Cards",
      "category": "Collections",
      "blocks": [
        { "type": "featured_collection" },
        { "type": "featured_collection" }
      ]
    }
  ]
}
{% endschema %}
